{% extends "admin/base_site.html" %}
{% load i18n admin_static admin_list %}
{% load admin_urls %}
{% load rotmicfilters %}

{% block extrastyle %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{% static "dashboard.css" %}" />
{% endblock %}

{% if not is_popup %}
    {% block breadcrumbs%}<div class="breadcrumbs">
      <a href="../../../">Home</a> &rsaquo;
      <a href="../../">Rotmic</a> &rsaquo;
      <a href="../">{{class_label}}</a> &rsaquo;
      {{ o.displayId }}
    </div>
    {% endblock %}
{% endif %}

{% block coltype %}colMS{% endblock %}
{% block bodyclass %}change-list{% endblock %}  {# keeps center scalable #}

{% block title %}Sample {{o.displayId}}{% endblock %} {# window title #}

{% block content %}

    {% block super-title %}<h3>Sample</h3>{% endblock %}<h1>{{o}}</h1>

    {% block object-tools %}
    {% if not is_popup %}
      <ul class="object-tools">
        {% block object-tools-items %}
        <li><a href="{% url opts|admin_urlname:'history' o.pk|admin_urlquote %}" class="historylink">{% trans "History" %}</a></li>
        <li><a href="edit">Edit</a></li>
        {% endblock %}
      </ul>
    {% endif %}
    {% endblock %}

    <div id="content-main">
    
        {% block sample-content %}
        {%endblock%}

        <div class='module'>
            
            {% block comments %}
                <h2>Sample Comments</h2>
                <div>
                    <p class='description'>
                        {{o.comment|markdown}}
                    </p>
                </div>
            {% endblock %}        
        
            {% block attachments %}   
                {% if o.attachments.count != 0 %}
                    <div style="width: 100%; height: 1px;background: lightgrey; text-align: center;"><h4>Sample Attachments</h4></div>
                    <p><br></p>
                    <div>
                        <table border="0" rules="none">
                            <tr>
                                {% for a in o.attachments.all %}
                                    <th style="text-align: center;">
                                        <a href="{{a.f.url}}">{{a}}</a> <br>
                                    </th>
                                    <th></th>
                                {% endfor %}
                            </tr>
                            <tr>
                                {% for a in o.attachments.all %}
                                    <td style="text-align: center;">{{a.description}} ({{a.f.size|filesizeformat}})</td> 
                                    <td></td>
                                {% endfor %}
                            </tr>
                        </table>
                        <p></p>
                    </div>
                {% endif %}
            {% endblock %}
            
        </div>
            
    </div>

{% endblock %}

{% block sidebar %}
    <div id="content-related">

        {% block side-rating %}
            <div class="module" id="rating-module">
                <h2>Rating</h2>
                <p>Not implemented</p>
            </div>
        {% endblock %}

        {% block side-concentration %}
            <div class="module" id="concentration-module">
                <h2>Specifications</h2>
                {% if o.aliquotNr %}
                    <p></p>
                    <p>{{o.aliquotNr}} aliquotes of</p>
                {% endif %}
                <ul>    
                    <li><B>Concentration</B>:
                        {% if o.concentration %}
                            {{o.concentration}}&nbsp{{o.concentrationUnit}}
                        {% endif %}
                    </li>
                    <li><B>Amount</B>: 
                        {% if o.amount %}
                            {{o.amount}}&nbsp{{o.amountUnit}}
                        {% endif %}
                        </li>
                    <li><B>Medium/Buffer</B>:
                        {% if o.solvent %}
                            <p>{{o.solvent}}</p>
                        {% endif %}
                    </li>
                </u>
            </div>
        {% endblock %}

        {% block side-record %}
            <div class="module" id="record-module">
                <h2>Record</h2>
                <ul>    
                    <li><B>Status</B>:<p>{{o.status}}</p></li>
                    <li><B>registered</B>: 
                        <p>
                        {% with o.registeredBy as U %}
                            {{o.registrationDate}}; &nbsp{{o.registrationTime}}<br>
                            by <a href="../?registeredBy__id__exact={{U.id}}">
                                {{U.first_name}} {{U.last_name}} ({{U}})</a>
                        {% endwith %}
                        </p>
                    </li>
                    {% if o.modifiedBy %}
                        <li><B>last modified</B>: 
                            <p>
                            {% with o.modifiedBy as U %}
                                {{o.modificationDate}}; &nbsp{{o.modificationTime}}<br>
                                by {{U.first_name}} {{U.last_name}} ({{U}})
                            {% endwith %}
                            </p>
                        </li>
                    {% endif %}   
                </ul>
            </div> 
        {% endblock %}


    </div>
{% endblock %}